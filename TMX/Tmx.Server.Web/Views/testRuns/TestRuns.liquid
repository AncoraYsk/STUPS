<html>
    <head>
        <title>Test runs queue</title>
        <style>
            table, th, td {
                border: 1px solid black;
                border-collapse: collapse;
            }
        </style>
        <meta http-equiv="refresh" content="30">
    </head>
    <body>
        <a href="/">Home</a>
        <br>
        <br>
        <table border="1">
            <tr>
                <th>Name</th>
                <th>Test Lab</th>
                <th>Started</th>
                <th>Time taken</th>
                <th>Status</th>
				<th>Test status</th>
                <!-- <th>Description</th> -->
                <th>Test results</th>
                <th>Parameters</th>
                <th>Clients</th>
                <th>Tasks</th>
                <th>Cancel</th>
            </tr>
            {% for testRun in @Model.TestRuns -%}
            <tr>
                <td>{{ testRun.Name }}</td>
                <td>{{ testRun.Get_Test_Lab_Name() }}</td>
                <td>{{ testRun.Start_Time }}</td>
                <td>{{ testRun.get_time_taken }}</td>
                <td>{{ testRun.Status }}</td>

                {% if testRun.Test_Status == 'Passed' -%}
                    <td style="background-color:green; text-align:center">{{ testRun.Test_Status }}</td>
                {% elseif testRun.Test_Status == 'Failed' -%}
                    <td style="background-color:red; text-align:center">{{ testRun.Test_Status }}</td>
                {% elseif testRun.Test_Status == 'NotRun' -%}
                    <td style="background-color:grey; text-align:center">{{ testRun.Test_Status }}</td>
                {% elseif testRun.Test_Status == 'KnownIssue' -%}
                    <td style="background-color:olive; text-align:center">{{ testRun.Test_Status }}</td>
                {% elseif testRun.Test_Status == 'Blocked' -%}
                    <td style="background-color:blue; text-align:center">{{ testRun.Test_Status }}</td>
                {% elseif testRun.Test_Status == 'WorkInProgress' -%}
                    <td style="background-color:white; text-align:center">{{ testRun.Test_Status }}</td>
                {% else -%}
					<td>{{ testRun.Test_Status }}</td>
                {% endif -%}

                <!-- <td>{{ testRun.Description }}</td> -->
                <td><a href="/testRuns/{{ testRun.Id }}/testResults">test results</a></td>
                <td><a href="/testRuns/{{ testRun.Id }}/testParameters">parameters</a></td>
                <td><a href="/testRuns/{{ testRun.Id }}/clients">clients</a></td>
                <td><a href="/testRuns/{{ testRun.Id }}/tasks">tasks</a></td>
                {% if testRun.Status == 'Pending' or testRun.Status == 'Running' -%}
                    <!-- http://blog.nancyfx.org/x-http-method-override-with-nancyfx/ -->                
                    <form action="/api/testRuns/{{ testRun.Id }}/cancelTestRun" method="POST">
                        <input type="hidden" name="_method" value="PUT"/>
                        <td><input type="submit" value="Cancel"/></td>
                    </form>
                {% else -%}
                    <td><input type="submit" value="Cancel" disabled/></td>
                {% endif -%}
            </tr>
            {% endfor -%}
        </table>
    </body>

    <!-- public enum TestStatuses
    {
        Passed = 1,
        Failed = 2,
        // NotTested = 3,
        NotRun = 3,
        KnownIssue = 4,
        Blocked = 5,
        WorkInProgress = 6
    } -->

</html>